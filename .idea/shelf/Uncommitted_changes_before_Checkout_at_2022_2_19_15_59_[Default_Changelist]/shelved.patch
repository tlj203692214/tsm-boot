Index: TSM/src/main/java/com/tsm/mapper/voMapper/StaffleaveVoMapper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.mapper.voMapper;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.core.toolkit.Constants;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.tsm.vo.StaffleaveVo;\r\nimport org.apache.ibatis.annotations.Param;\r\nimport org.apache.ibatis.annotations.Select;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface StaffleaveVoMapper extends BaseMapper<StaffleaveVo> {\r\n    @Select(\"select * from staffleave sl left join personal ps on sl.STAFF_ID1 = ps.STAFF_ID \" +\r\n            \"left join personal p on sl.STAFF_ID2 = p.STAFF_ID\" + \" ${ew.customSqlSegment}\")//员工请假分页模糊查询\r\n    public IPage<StaffleaveVo> findleaveVo(Page page, @Param(Constants.WRAPPER) QueryWrapper<StaffleaveVo> adminVoQueryWrapper);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/mapper/voMapper/StaffleaveVoMapper.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/mapper/voMapper/StaffleaveVoMapper.java	(date 1643013550263)
@@ -12,7 +12,7 @@
 
 @Repository
 public interface StaffleaveVoMapper extends BaseMapper<StaffleaveVo> {
-    @Select("select * from staffleave sl left join personal ps on sl.STAFF_ID1 = ps.STAFF_ID " +
-            "left join personal p on sl.STAFF_ID2 = p.STAFF_ID" + " ${ew.customSqlSegment}")//员工请假分页模糊查询
+    @Select("select * from staffleave sl left join personal ps on sl.STAFF_ID1 = ps.STAFF_ID left join personal p " +
+            "on sl.STAFF_ID2 = p.STAFF_ID" + " ${ew.customSqlSegment}" + " order by LEAVE_ID desc")//员工请假分页模糊查询
     public IPage<StaffleaveVo> findleaveVo(Page page, @Param(Constants.WRAPPER) QueryWrapper<StaffleaveVo> adminVoQueryWrapper);
 }
Index: TSM/src/main/java/com/tsm/controller/StaffbusinessController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.controller;\r\n\r\n\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.tsm.entity.Staffbusiness;\r\nimport com.tsm.service.IStaffbusinessService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n/**\r\n * <p>\r\n *  前端控制器\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Slf4j\r\n@RestController\r\n@CrossOrigin(maxAge = 60)\r\n@RequestMapping(\"/staffbusiness\")\r\npublic class StaffbusinessController {\r\n    @Autowired\r\n    private IStaffbusinessService service;\r\n    @GetMapping(\"/business\")\r\n    public IPage<Staffbusiness> findbusiness(@RequestParam(\"select\") String st, @RequestParam(\"currentPage\") int page, @RequestParam(\"pagesize\") int size){\r\n        IPage<Staffbusiness> iPage = service.findbusiness(st, page, size);\r\n        log.debug(iPage.toString());\r\n        return iPage;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/controller/StaffbusinessController.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/controller/StaffbusinessController.java	(date 1642764092948)
@@ -6,6 +6,7 @@
 import com.tsm.service.IStaffbusinessService;
 import lombok.extern.slf4j.Slf4j;
 import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Repository;
 import org.springframework.web.bind.annotation.*;
 
 /**
@@ -29,4 +30,10 @@
         log.debug(iPage.toString());
         return iPage;
     }
+    @PostMapping("insertbusiness")
+    public int Insertbusiness(@RequestBody Staffbusiness staffbusiness){
+        int add = service.addstaffbusiness(staffbusiness);
+        log.debug("新增成功"+add+"条数据");
+        return add;
+    }
 }
Index: TSM/src/main/java/com/tsm/service/ISatffsignService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service;\r\n\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.service.IService;\r\nimport com.tsm.entity.Satffsign;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\n\r\n/**\r\n * <p>\r\n *  服务类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface ISatffsignService extends IService<Satffsign> {\r\n    public int updateStaffsign(Satffsign satffsign);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/ISatffsignService.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/ISatffsignService.java	(date 1643015268705)
@@ -6,6 +6,8 @@
 import org.springframework.web.bind.annotation.RequestBody;
 import org.springframework.web.bind.annotation.RequestParam;
 
+import java.util.List;
+
 /**
  * <p>
  *  服务类
@@ -15,5 +17,6 @@
  * @since 2021-12-09
  */
 public interface ISatffsignService extends IService<Satffsign> {
-    public int updateStaffsign(Satffsign satffsign);
+    public int updateStaffsign(@RequestBody Satffsign satffsign);
+    public List<Satffsign> StaffsignList();
 }
Index: TSM/src/main/java/com/tsm/controller/SatffsignController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.controller;\r\n\r\n\r\nimport com.tsm.entity.Satffsign;\r\nimport com.tsm.service.ISatffsignService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n/**\r\n * <p>\r\n *  前端控制器\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Slf4j\r\n@RestController\r\n@CrossOrigin(maxAge = 60)\r\npublic class SatffsignController {\r\n    @Autowired\r\n    private ISatffsignService service;\r\n    //修改打卡状态和时间\r\n    @PostMapping(\"/updatestaffsign\")\r\n    public int UpdateStaffsign(@RequestBody Satffsign satffsign){\r\n        int daka = service.updateStaffsign(satffsign);\r\n        System.out.println(daka);\r\n        return daka;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/controller/SatffsignController.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/controller/SatffsignController.java	(date 1643012618275)
@@ -7,6 +7,8 @@
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.web.bind.annotation.*;
 
+import java.util.List;
+
 /**
  * <p>
  *  前端控制器
@@ -28,4 +30,10 @@
         System.out.println(daka);
         return daka;
     }
+    //查询所有员工打卡
+    @GetMapping("/staffsignlist")
+    public List<Satffsign> StaffsignList(){
+        List<Satffsign> list = service.StaffsignList();
+        return list;
+    }
 }
Index: TSM/src/main/java/com/tsm/service/IStaffleaveService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service;\r\n\r\nimport com.baomidou.mybatisplus.extension.service.IService;\r\nimport com.tsm.entity.Staffleave;\r\n\r\n/**\r\n * <p>\r\n *  服务类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface IStaffleaveService extends IService<Staffleave> {\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/IStaffleaveService.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/IStaffleaveService.java	(date 1642763370999)
@@ -12,5 +12,5 @@
  * @since 2021-12-09
  */
 public interface IStaffleaveService extends IService<Staffleave> {
-
+    public int addstaffleave(Staffleave staffleave);
 }
Index: TSM/src/main/java/com/tsm/service/impl/SatffsignServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.entity.Satffsign;\r\nimport com.tsm.mapper.SatffsignMapper;\r\nimport com.tsm.service.ISatffsignService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.Date;\r\n\r\n/**\r\n * <p>\r\n *  服务实现类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Service\r\npublic class SatffsignServiceImpl extends ServiceImpl<SatffsignMapper, Satffsign> implements ISatffsignService {\r\n\r\n    @Autowired\r\n    private SatffsignMapper mapper;\r\n\r\n    @Override\r\n    public int updateStaffsign(Satffsign satffsign) {\r\n        int id = satffsign.getSignId();\r\n        Satffsign s1=mapper.selectById(id);\r\n        System.out.println(\"iddiididididi\"+id);\r\n        s1.setSignState(1);\r\n        s1.setSignDate(new Date());\r\n        int update = mapper.updateById(s1);\r\n        if (update>0){\r\n            System.out.println(\"打卡成功！\");\r\n        }else {\r\n            System.out.println(\"打卡失败！\");\r\n        }\r\n        return update;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/SatffsignServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/SatffsignServiceImpl.java	(date 1643015738316)
@@ -1,8 +1,6 @@
 package com.tsm.service.impl;
 
 import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
-import com.baomidou.mybatisplus.core.metadata.IPage;
-import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
 import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
 import com.tsm.entity.Satffsign;
 import com.tsm.mapper.SatffsignMapper;
@@ -10,7 +8,9 @@
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Service;
 
+import java.text.DateFormat;
 import java.util.Date;
+import java.util.List;
 
 /**
  * <p>
@@ -28,7 +28,7 @@
 
     @Override
     public int updateStaffsign(Satffsign satffsign) {
-        int id = satffsign.getSignId();
+        int id = satffsign.getStaffId();
         Satffsign s1=mapper.selectById(id);
         System.out.println("iddiididididi"+id);
         s1.setSignState(1);
@@ -41,4 +41,27 @@
         }
         return update;
     }
+
+    @Override
+    public List<Satffsign> StaffsignList() {
+        QueryWrapper<Satffsign> wrapper = new QueryWrapper<>();
+        List<Satffsign> list = mapper.selectList(wrapper);
+        Date date = new Date();
+        DateFormat dateFormat = DateFormat.getDateInstance();
+        String nyr = dateFormat.format(date);
+        System.out.println("系统时间"+nyr);
+        //查询员工打卡时间，如果与当前时间不符自动修改状态为未打卡
+        for (int i=0;i<list.size();i++){
+            Satffsign s=list.get(i);
+            String mydate = dateFormat.format(s.getSignDate());
+            System.out.println("数据库时间"+mydate);
+            if (mydate.equals(nyr)){
+
+            }else{
+                s.setSignState(0);
+                System.out.println("状态"+s.getSignState());
+            }
+        }
+        return list;
+    }
 }
Index: TSM/src/main/java/com/tsm/controller/StaffleaveController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.controller;\r\n\r\n\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n/**\r\n * <p>\r\n *  前端控制器\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@RestController\r\n@RequestMapping(\"/staffleave\")\r\npublic class StaffleaveController {\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/controller/StaffleaveController.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/controller/StaffleaveController.java	(date 1642764251938)
@@ -1,8 +1,11 @@
 package com.tsm.controller;
 
 
-import org.springframework.web.bind.annotation.RequestMapping;
-import org.springframework.web.bind.annotation.RestController;
+import com.tsm.entity.Staffleave;
+import com.tsm.service.IStaffleaveService;
+import lombok.extern.slf4j.Slf4j;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.web.bind.annotation.*;
 
 /**
  * <p>
@@ -12,8 +15,17 @@
  * @author 军
  * @since 2021-12-09
  */
+@Slf4j
 @RestController
+@CrossOrigin(maxAge = 60)
 @RequestMapping("/staffleave")
 public class StaffleaveController {
-
+    @Autowired
+    private IStaffleaveService service;
+    @PostMapping("/insetleave")
+    public int Insertleave(@RequestBody Staffleave staffleave){
+        int add = service.addstaffleave(staffleave);
+        System.out.println("新增数据"+add+"条");
+        return add;
+    }
 }
Index: TSM/src/main/java/com/tsm/entity/Dept.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.entity;\r\n\r\nimport com.baomidou.mybatisplus.annotation.IdType;\r\nimport com.baomidou.mybatisplus.annotation.KeySequence;\r\nimport com.baomidou.mybatisplus.annotation.TableField;\r\nimport com.baomidou.mybatisplus.annotation.TableId;\r\nimport io.swagger.annotations.ApiModel;\r\nimport lombok.Data;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.experimental.Accessors;\r\n\r\nimport java.io.Serializable;\r\n\r\n\r\n/**\r\n * <p>\r\n * \r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Data\r\n@EqualsAndHashCode(callSuper = false)\r\n@Accessors(chain = true)\r\n@ApiModel(value=\"Dept对象\", description=\"\")\r\n@KeySequence(value = \"dept_seq\")\r\npublic class Dept implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @TableId(value = \"DEPT_ID\",type = IdType.INPUT)\r\n    private int deptId;\r\n\r\n    @TableField(\"DEPT_NAME\")\r\n    private String deptName;\r\n\r\n    @TableField(\"DELETED\")\r\n    private int deleted;\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/entity/Dept.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/entity/Dept.java	(date 1643348629429)
@@ -35,6 +35,9 @@
     @TableField("DEPT_NAME")
     private String deptName;
 
+    @TableField("DEPT_DID")
+    private int deptdid;
+
     @TableField("DELETED")
     private int deleted;
 
Index: TSM/src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>server:\r\n  port: 8088\r\n  #?????\r\n  servlet:\r\n    context-path: /TSM\r\nspring:\r\n  datasource:\r\n    url: jdbc:oracle:thin:@127.0.0.1:1521:orcl\r\n    username: project\r\n    password: 123456\r\n    driver-class-name: oracle.jdbc.driver.OracleDriver\r\n    #mysql?????\r\n    #url: jdbc:mysql://127.0.0.1:3308/mydb?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=GMT%2B8\r\n    #username: root\r\n    #password: root2020\r\n    #driver-class-name: com.mysql.cj.jdbc.Driver\r\n    # ??druid???\r\n    type: com.alibaba.druid.pool.DruidDataSource\r\n    druid:\r\n      # ????????\r\n      validationQuery: SELECT 1 FROM DUAL\r\n      # ???????????\r\n      initialSize: 10\r\n      minIdle: 10\r\n      maxActive: 200\r\n      # ??????????????????????\r\n      minEvictableIdleTimeMillis: 180000\r\n      testOnBorrow: false\r\n      testWhileIdle: true\r\n      removeAbandoned: true\r\n      removeAbandonedTimeout: 1800\r\n      logAbandoned: true\r\n      # ??PSCache??????????PSCache???\r\n      poolPreparedStatements: true\r\n      maxOpenPreparedStatements: 100\r\n      # ?????????filters????????sql?????'wall'?????\r\n      filters: stat,wall\r\n#????\r\nmybatis-plus:\r\n  configuration:\r\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl\r\n  #逻辑删除列\r\n#  global-config:\r\n#    db-config:\r\n#      logic-delete-field: gary # 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)\r\n#      logic-delete-value: 1 # 逻辑已删除值(默认为 1)\r\n#      logic-not-delete-value: 0 # 逻辑未删除值(默认为 0)\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/resources/application.yml	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/resources/application.yml	(date 1642074585707)
@@ -5,9 +5,9 @@
     context-path: /TSM
 spring:
   datasource:
-    url: jdbc:oracle:thin:@127.0.0.1:1521:orcl
+    url: jdbc:oracle:thin:@127.0.0.1:1521:xe
     username: project
-    password: 123456
+    password: '123456'
     driver-class-name: oracle.jdbc.driver.OracleDriver
     #mysql?????
     #url: jdbc:mysql://127.0.0.1:3308/mydb?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=GMT%2B8
Index: TSM/src/main/java/com/tsm/controller/AttendanceController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.controller;\r\n\r\n\r\nimport com.tsm.entity.Attendance;\r\nimport com.tsm.service.IAttendanceService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n/**\r\n * <p>\r\n *  前端控制器\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Slf4j\r\n@RestController\r\n@CrossOrigin(maxAge = 60)\r\n@RequestMapping(\"/attendance\")\r\npublic class AttendanceController {\r\n    @Autowired\r\n    private IAttendanceService service;\r\n    @PostMapping(\"/addattendance\")\r\n    public int addattendance(@RequestBody Attendance attendance){\r\n        int add = service.addAttendance(attendance);\r\n        System.out.println(\"新增\"+add+\"条数据\");\r\n        return add;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/controller/AttendanceController.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/controller/AttendanceController.java	(date 1642144713595)
@@ -7,6 +7,8 @@
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.web.bind.annotation.*;
 
+import java.util.List;
+
 /**
  * <p>
  *  前端控制器
@@ -28,4 +30,10 @@
         System.out.println("新增"+add+"条数据");
         return add;
     }
+    @GetMapping("/attendancebyid/{staffid}")
+    public List<Attendance> attendancesByid(@PathVariable("staffid") int staffid){
+        List<Attendance> list = service.AttendancesByid(staffid);
+        log.debug(list.toString());
+        return list;
+    }
 }
Index: TSM/src/main/java/com/tsm/mapper/voMapper/AdminVoMapper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.mapper.voMapper;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.core.toolkit.Constants;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.tsm.vo.AdminVo;\r\nimport org.apache.ibatis.annotations.Param;\r\nimport org.apache.ibatis.annotations.Select;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface AdminVoMapper extends BaseMapper<AdminVo> {\r\n    @Select(\"select * from administration ad left join personal ps on ad.staff_id = ps.staff_id left join portrait pt \\n\" +\r\n            \"on ps.portrait_id = pt.portrait_id left join dept d on ad.dept_id = d.dept_id left join position pos \\n\" +\r\n            \"on ad.position_id = pos.position_id\" + \" ${ew.customSqlSegment}\")\r\n    public IPage<AdminVo> findsAdmins(Page page, @Param(Constants.WRAPPER) QueryWrapper<AdminVo> adminVoQueryWrapper);//员工管理分页模糊查询\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/mapper/voMapper/AdminVoMapper.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/mapper/voMapper/AdminVoMapper.java	(date 1642675732743)
@@ -13,7 +13,7 @@
 @Repository
 public interface AdminVoMapper extends BaseMapper<AdminVo> {
     @Select("select * from administration ad left join personal ps on ad.staff_id = ps.staff_id left join portrait pt \n" +
-            "on ps.portrait_id = pt.portrait_id left join dept d on ad.dept_id = d.dept_id left join position pos \n" +
-            "on ad.position_id = pos.position_id" + " ${ew.customSqlSegment}")
+            " on ps.portrait_id = pt.portrait_id left join position pos on ad.position_id = pos.position_id \n" +
+            " left join dept d on pos.dept_id = d.dept_id" + " ${ew.customSqlSegment}")
     public IPage<AdminVo> findsAdmins(Page page, @Param(Constants.WRAPPER) QueryWrapper<AdminVo> adminVoQueryWrapper);//员工管理分页模糊查询
 }
Index: TSM/src/main/java/com/tsm/service/impl/implVo/StaffsignVoServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl.implVo;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.mapper.voMapper.StaffsignVoMapper;\r\nimport com.tsm.service.serviceVo.IStaffsignVoService;\r\nimport com.tsm.vo.StaffsignVo;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport java.text.DateFormat;\r\nimport java.util.Date;\r\n\r\n\r\n@Service\r\npublic class StaffsignVoServiceImpl extends ServiceImpl<StaffsignVoMapper, StaffsignVo> implements IStaffsignVoService {\r\n\r\n    @Autowired\r\n    private StaffsignVoMapper voMapper;\r\n    @Override\r\n    public IPage<StaffsignVo> findStaffsign(String it, int page, int size) {\r\n        Page<StaffsignVo> page1 = new Page<>(page,size);\r\n        //在mapper手写的方法\r\n        IPage<StaffsignVo> Ipage = voMapper.findStaffsign(null,it,page1);\r\n        Date date = new Date();\r\n//        SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        DateFormat dateFormat = DateFormat.getDateInstance();\r\n        String nyr = dateFormat.format(date);\r\n        System.out.println(\"系统时间\"+nyr);\r\n        // 视图层vo的值进行了更改显示，但是数据库的状态并没有改变\r\n        for (int i=0;i<Ipage.getRecords().size();i++){\r\n            StaffsignVo s=Ipage.getRecords().get(i);\r\n            String mydate = dateFormat.format(s.getSignDate());\r\n            System.out.println(\"数据库时间\"+mydate);\r\n            if (mydate.equals(nyr)){\r\n\r\n            }else{\r\n                s.setSignState(0);\r\n                System.out.println(\"状态\"+s.getSignState());\r\n            }\r\n        }\r\n        return Ipage;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/implVo/StaffsignVoServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/implVo/StaffsignVoServiceImpl.java	(date 1643014587349)
@@ -27,17 +27,14 @@
 //        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
         DateFormat dateFormat = DateFormat.getDateInstance();
         String nyr = dateFormat.format(date);
-        System.out.println("系统时间"+nyr);
         // 视图层vo的值进行了更改显示，但是数据库的状态并没有改变
         for (int i=0;i<Ipage.getRecords().size();i++){
             StaffsignVo s=Ipage.getRecords().get(i);
             String mydate = dateFormat.format(s.getSignDate());
-            System.out.println("数据库时间"+mydate);
             if (mydate.equals(nyr)){
 
             }else{
                 s.setSignState(0);
-                System.out.println("状态"+s.getSignState());
             }
         }
         return Ipage;
Index: TSM/src/main/java/com/tsm/service/impl/AttendanceServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.entity.Attendance;\r\nimport com.tsm.mapper.AttendanceMapper;\r\nimport com.tsm.service.IAttendanceService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.Date;\r\n\r\n/**\r\n * <p>\r\n *  服务实现类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Service\r\npublic class AttendanceServiceImpl extends ServiceImpl<AttendanceMapper, Attendance> implements IAttendanceService {\r\n    @Autowired\r\n    private AttendanceMapper attendanceMapper;\r\n    @Override\r\n    public int addAttendance(Attendance attendance) {\r\n        Integer id = attendance.getStaffId();\r\n        Attendance a1 = new Attendance();\r\n        a1.setAttendanceDate(new Date());\r\n        a1.setStaffId(id);\r\n        int insert = attendanceMapper.insert(a1);\r\n        if (insert>0){\r\n            log.debug(\"新增成功！\");\r\n        }else{\r\n            log.debug(\"新增失败！\");\r\n        }\r\n        return insert;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/AttendanceServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/AttendanceServiceImpl.java	(date 1642140651927)
@@ -1,5 +1,6 @@
 package com.tsm.service.impl;
 
+import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
 import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
 import com.tsm.entity.Attendance;
 import com.tsm.mapper.AttendanceMapper;
@@ -8,6 +9,7 @@
 import org.springframework.stereotype.Service;
 
 import java.util.Date;
+import java.util.List;
 
 /**
  * <p>
@@ -35,4 +37,12 @@
         }
         return insert;
     }
+
+    @Override
+    public List<Attendance> AttendancesByid(int staffid) {
+        QueryWrapper<Attendance> wrapper = new QueryWrapper<>();
+        wrapper.eq("STAFF_ID",staffid);
+        List<Attendance> list = attendanceMapper.selectList(wrapper);
+        return list;
+    }
 }
Index: .idea/dataSources.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DataSourceManagerImpl\" format=\"xml\" multifile-model=\"true\">\r\n    <data-source source=\"LOCAL\" name=\"project\" uuid=\"0840928f-63a0-4532-8a2c-887bb3b9556a\">\r\n      <driver-ref>oracle.19</driver-ref>\r\n      <synchronize>true</synchronize>\r\n      <auto-commit>false</auto-commit>\r\n      <jdbc-driver>oracle.jdbc.OracleDriver</jdbc-driver>\r\n      <jdbc-url>jdbc:oracle:thin:@localhost:1521:orcl</jdbc-url>\r\n      <working-dir>$ProjectFileDir$</working-dir>\r\n    </data-source>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/dataSources.xml	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ .idea/dataSources.xml	(date 1642074634829)
@@ -2,12 +2,11 @@
 <project version="4">
   <component name="DataSourceManagerImpl" format="xml" multifile-model="true">
     <data-source source="LOCAL" name="project" uuid="0840928f-63a0-4532-8a2c-887bb3b9556a">
-      <driver-ref>oracle.19</driver-ref>
+      <driver-ref>oracle</driver-ref>
       <synchronize>true</synchronize>
       <auto-commit>false</auto-commit>
       <jdbc-driver>oracle.jdbc.OracleDriver</jdbc-driver>
-      <jdbc-url>jdbc:oracle:thin:@localhost:1521:orcl</jdbc-url>
-      <working-dir>$ProjectFileDir$</working-dir>
+      <jdbc-url>jdbc:oracle:thin:@localhost:1521:xe</jdbc-url>
     </data-source>
   </component>
 </project>
\ No newline at end of file
Index: TSM/src/main/java/com/tsm/mapper/AttendanceMapper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.mapper;\r\n\r\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\r\nimport com.tsm.entity.Attendance;\r\n\r\n/**\r\n * <p>\r\n *  Mapper 接口\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface AttendanceMapper extends BaseMapper<Attendance> {\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/mapper/AttendanceMapper.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/mapper/AttendanceMapper.java	(date 1642140799468)
@@ -2,6 +2,7 @@
 
 import com.baomidou.mybatisplus.core.mapper.BaseMapper;
 import com.tsm.entity.Attendance;
+import org.springframework.stereotype.Repository;
 
 /**
  * <p>
@@ -11,6 +12,7 @@
  * @author 军
  * @since 2021-12-09
  */
+@Repository
 public interface AttendanceMapper extends BaseMapper<Attendance> {
 
 }
Index: TSM/src/main/java/com/tsm/service/IAttendanceService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service;\r\n\r\nimport com.baomidou.mybatisplus.extension.service.IService;\r\nimport com.tsm.entity.Attendance;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\n\r\n/**\r\n * <p>\r\n *  服务类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface IAttendanceService extends IService<Attendance> {\r\n    public int addAttendance(@RequestBody Attendance attendance);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/IAttendanceService.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/IAttendanceService.java	(date 1642140651951)
@@ -4,6 +4,8 @@
 import com.tsm.entity.Attendance;
 import org.springframework.web.bind.annotation.RequestBody;
 
+import java.util.List;
+
 /**
  * <p>
  *  服务类
@@ -14,4 +16,5 @@
  */
 public interface IAttendanceService extends IService<Attendance> {
     public int addAttendance(@RequestBody Attendance attendance);
+    public List<Attendance> AttendancesByid(int staffid);
 }
Index: TSM/src/main/java/com/tsm/service/impl/StaffbusinessServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.entity.Staffbusiness;\r\nimport com.tsm.mapper.StaffbusinessMapper;\r\nimport com.tsm.service.IStaffbusinessService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n/**\r\n * <p>\r\n *  服务实现类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Service\r\npublic class StaffbusinessServiceImpl extends ServiceImpl<StaffbusinessMapper, Staffbusiness> implements IStaffbusinessService {\r\n    @Autowired\r\n    private StaffbusinessMapper mapper;\r\n    @Override\r\n    public IPage<Staffbusiness> findbusiness(String st, int page, int size) {\r\n        Page<Staffbusiness> page1 = new Page<>(page,size);\r\n        QueryWrapper<Staffbusiness> wrapper = new QueryWrapper<>();\r\n        wrapper.eq(\"DELETED\",0);\r\n        if (st.equals(\"1\")){\r\n\r\n        }else if (st.equals(\"2\")){\r\n            wrapper.isNull(\"STAFF_ID2\");\r\n        }else if(st.equals(\"3\")){\r\n            wrapper.isNotNull(\"STAFF_ID2\");\r\n            wrapper.eq(\"STAFFBUSINESS_STATE\",1);\r\n        }else if(st.equals(\"4\")){\r\n            wrapper.isNotNull(\"STAFF_ID2\");\r\n            wrapper.eq(\"STAFFBUSINESS_STATE\",0);\r\n        }\r\n        IPage<Staffbusiness> iPage = mapper.selectPage(page1,wrapper);\r\n        return iPage;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/StaffbusinessServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/StaffbusinessServiceImpl.java	(date 1642763892756)
@@ -41,4 +41,15 @@
         IPage<Staffbusiness> iPage = mapper.selectPage(page1,wrapper);
         return iPage;
     }
+
+    @Override
+    public int addstaffbusiness(Staffbusiness staffbusiness) {
+        int add = mapper.insert(staffbusiness);
+        if (add>0){
+            log.debug("新增成功");
+        }else{
+            log.debug("新增失败");
+        }
+        return add;
+    }
 }
Index: TSM/src/main/java/com/tsm/service/impl/DeptServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.Wrapper;\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.entity.Dept;\r\nimport com.tsm.mapper.DeptMapper;\r\nimport com.tsm.service.IDeptService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n/**\r\n * <p>\r\n *  服务实现类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Service\r\npublic class DeptServiceImpl extends ServiceImpl<DeptMapper, Dept> implements IDeptService {\r\n    @Autowired\r\n    private DeptMapper deptMapper;\r\n    @Override\r\n    public IPage<Dept> findDepts(String it, int page, int size) {\r\n        QueryWrapper<Dept> wrapper = new QueryWrapper<>();\r\n        wrapper.eq(\"DELETED\",0);\r\n        wrapper.like(\"DEPT_NAME\",it);\r\n        Page<Dept> page1 = new Page<>(page,size);\r\n        IPage<Dept> iPage = deptMapper.selectPage(page1,wrapper);\r\n        return iPage;\r\n    }\r\n\r\n    @Override\r\n    public List<Dept> updateDept(Dept dept) {\r\n        List<Dept> list= deptMapper.selectList(null);\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    public int delDept(int deptid) {\r\n        Dept dept = deptMapper.selectById(deptid);\r\n        dept.setDeleted(1);\r\n        int del = deptMapper.updateById(dept);\r\n        if (del>0){\r\n            log.debug(\"删除成功\"+dept.getDeleted());\r\n        }else{\r\n            log.debug(\"删除失败\");\r\n        }\r\n        return del;\r\n    }\r\n\r\n    @Override\r\n    public int upDept(Dept dept) {\r\n        int id = dept.getDeptId();\r\n        String name = dept.getDeptName();\r\n        Dept dept1 = deptMapper.selectById(id);\r\n        dept1.setDeptName(name);\r\n        int update = deptMapper.updateById(dept1);\r\n        if (update>0){\r\n            log.debug(\"修改部门成功\"+dept1.getDeptName());\r\n        }else {\r\n            log.debug(\"修改部门失败\");\r\n        }\r\n        return update;\r\n    }\r\n\r\n    @Override\r\n    public int addDept(Dept dept) {\r\n        String name = dept.getDeptName();\r\n        Dept dept1 = new Dept();\r\n        dept1.setDeptName(name);\r\n        int insert = deptMapper.insert(dept1);\r\n        if (insert>0){\r\n            log.debug(\"新增部门成功\");\r\n        }else {\r\n            log.debug(\"新增部门失败\");\r\n        }\r\n        return insert;\r\n    }\r\n\r\n    @Override\r\n    public List<Dept> ListDept() {\r\n        QueryWrapper<Dept> wrapper = new QueryWrapper<>();\r\n        wrapper.eq(\"DELETED\",0);\r\n        List<Dept> list = deptMapper.selectList(wrapper);\r\n        return list;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/DeptServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/DeptServiceImpl.java	(date 1643349412266)
@@ -30,6 +30,7 @@
     public IPage<Dept> findDepts(String it, int page, int size) {
         QueryWrapper<Dept> wrapper = new QueryWrapper<>();
         wrapper.eq("DELETED",0);
+        wrapper.eq("DEPT_DID",0);
         wrapper.like("DEPT_NAME",it);
         Page<Dept> page1 = new Page<>(page,size);
         IPage<Dept> iPage = deptMapper.selectPage(page1,wrapper);
@@ -73,8 +74,10 @@
     @Override
     public int addDept(Dept dept) {
         String name = dept.getDeptName();
+        int did = dept.getDeptdid();
         Dept dept1 = new Dept();
         dept1.setDeptName(name);
+        dept1.setDeptdid(did);
         int insert = deptMapper.insert(dept1);
         if (insert>0){
             log.debug("新增部门成功");
@@ -88,6 +91,7 @@
     public List<Dept> ListDept() {
         QueryWrapper<Dept> wrapper = new QueryWrapper<>();
         wrapper.eq("DELETED",0);
+        wrapper.eq("DEPT_DID",0);
         List<Dept> list = deptMapper.selectList(wrapper);
         return list;
     }
Index: TSM/src/main/java/com/tsm/service/impl/StaffleaveServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.tsm.entity.Staffleave;\r\nimport com.tsm.mapper.StaffleaveMapper;\r\nimport com.tsm.service.IStaffleaveService;\r\nimport org.springframework.stereotype.Service;\r\n\r\n/**\r\n * <p>\r\n *  服务实现类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Service\r\npublic class StaffleaveServiceImpl extends ServiceImpl<StaffleaveMapper, Staffleave> implements IStaffleaveService {\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/impl/StaffleaveServiceImpl.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/impl/StaffleaveServiceImpl.java	(date 1642763892767)
@@ -4,6 +4,7 @@
 import com.tsm.entity.Staffleave;
 import com.tsm.mapper.StaffleaveMapper;
 import com.tsm.service.IStaffleaveService;
+import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Service;
 
 /**
@@ -17,4 +18,16 @@
 @Service
 public class StaffleaveServiceImpl extends ServiceImpl<StaffleaveMapper, Staffleave> implements IStaffleaveService {
 
+    @Autowired
+    private StaffleaveMapper mapper;
+    @Override
+    public int addstaffleave(Staffleave staffleave) {
+        int add = mapper.insert(staffleave);
+        if (add>0){
+            log.debug("新增成功");
+        }else{
+            log.debug("新增失败");
+        }
+        return add;
+    }
 }
Index: TSM/src/main/java/com/tsm/mapper/StaffleaveMapper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.mapper;\r\n\r\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\r\nimport com.tsm.entity.Staffleave;\r\n\r\n/**\r\n * <p>\r\n *  Mapper 接口\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface StaffleaveMapper extends BaseMapper<Staffleave> {\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/mapper/StaffleaveMapper.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/mapper/StaffleaveMapper.java	(date 1642763892780)
@@ -2,6 +2,7 @@
 
 import com.baomidou.mybatisplus.core.mapper.BaseMapper;
 import com.tsm.entity.Staffleave;
+import org.springframework.stereotype.Repository;
 
 /**
  * <p>
@@ -11,6 +12,7 @@
  * @author 军
  * @since 2021-12-09
  */
+@Repository
 public interface StaffleaveMapper extends BaseMapper<Staffleave> {
 
 }
Index: TSM/src/main/java/com/tsm/entity/Attendance.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.entity;\r\n\r\nimport com.baomidou.mybatisplus.annotation.*;\r\nimport io.swagger.annotations.ApiModel;\r\nimport lombok.Data;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.experimental.Accessors;\r\n\r\nimport java.io.Serializable;\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDateTime;\r\nimport java.util.Date;\r\n\r\n/**\r\n * <p>\r\n * \r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\n@Data\r\n@EqualsAndHashCode(callSuper = false)\r\n@Accessors(chain = true)\r\n@ApiModel(value=\"Attendance对象\", description=\"\")\r\n@KeySequence(value = \"attendance_seq\")\r\npublic class Attendance implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @TableId(value = \"ATTENDANCE_ID\",type = IdType.INPUT)\r\n    private int attendanceId;\r\n\r\n    @TableField(\"ATTENDANCE_DATE\")\r\n    private Date attendanceDate;\r\n\r\n    @TableField(\"STAFF_ID\")\r\n    private int staffId;\r\n\r\n    @TableField(\"DELETED\")\r\n    @TableLogic\r\n    private int deleted;\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/entity/Attendance.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/entity/Attendance.java	(date 1642144952485)
@@ -1,6 +1,7 @@
 package com.tsm.entity;
 
 import com.baomidou.mybatisplus.annotation.*;
+import com.fasterxml.jackson.annotation.JsonFormat;
 import io.swagger.annotations.ApiModel;
 import lombok.Data;
 import lombok.EqualsAndHashCode;
@@ -32,6 +33,7 @@
     private int attendanceId;
 
     @TableField("ATTENDANCE_DATE")
+    @JsonFormat(pattern = "YYYY-MM-dd")
     private Date attendanceDate;
 
     @TableField("STAFF_ID")
Index: TSM/src/main/java/com/tsm/service/IStaffbusinessService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tsm.service;\r\n\r\nimport com.baomidou.mybatisplus.core.metadata.IPage;\r\nimport com.baomidou.mybatisplus.extension.service.IService;\r\nimport com.tsm.entity.Staffbusiness;\r\n\r\n/**\r\n * <p>\r\n *  服务类\r\n * </p>\r\n *\r\n * @author 军\r\n * @since 2021-12-09\r\n */\r\npublic interface IStaffbusinessService extends IService<Staffbusiness> {\r\n    public IPage<Staffbusiness> findbusiness(String st, int page, int size);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- TSM/src/main/java/com/tsm/service/IStaffbusinessService.java	(revision d5b7f5605d5513673bac972059b96cb32982d91a)
+++ TSM/src/main/java/com/tsm/service/IStaffbusinessService.java	(date 1642763444027)
@@ -14,4 +14,5 @@
  */
 public interface IStaffbusinessService extends IService<Staffbusiness> {
     public IPage<Staffbusiness> findbusiness(String st, int page, int size);
+    public int addstaffbusiness(Staffbusiness staffbusiness);
 }
